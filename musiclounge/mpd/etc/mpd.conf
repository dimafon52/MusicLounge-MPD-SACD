# An example configuration file for MPD.
# Read the user manual for documentation: http://www.musicpd.org/doc/user/

music_directory		"/var/lib/mpd/music"
playlist_directory	"/var/lib/mpd/playlists"
pid_file			"/var/lib/mpd/mpd.pid"
db_file			    "/var/lib/mpd/data/database"
state_file			"/var/lib/mpd/data/state"
sticker_file		"/var/lib/mpd/data/sticker.sql"

user "root"  # <<<------- MUST BE user ROOT!!! (for Docker Container)

#group "audio"                                                                      
#group "mpd"                                                                      
#bind_to_address "127.0.0.1"                                                              
bind_to_address "0.0.0.0"                                                              
#port "6600"                                                                        
log_level "default"                                                                
restore_paused "no"                                                               
#save_absolute_paths_in_playlists "no"                                             
#metadata_to_use artist,album,title,track,name,genre,date,composer,performer,disc" 
#metadata_to_use "+comment"                                                        
auto_update "no"                                                                   
#auto_update_depth "3"                                                             
follow_outside_symlinks "yes"                                                      
follow_inside_symlinks "yes"                                                       
zeroconf_enabled "no"                                                              
zeroconf_name "Music DAC @ %h"                                                          
connection_timeout "120"                                                           

# Input #######################################################################
#
input {
        plugin "curl"
#       proxy "proxy.isp.com:8080"
#       proxy_user "user"
#       proxy_password "password"
}

input {
  plugin "sacd"
  enabled "yes"                
}                                                                                  
#
###############################################################################

# Decoder #####################################################################    
#                                                                                  
decoder {                                                                          
    plugin "ffmpeg"                                                                    
    enabled "no"                                                                      
   # gapless "no"                                                                     
}                                                                                  
                                                                                   
decoder {                                                                          
    plugin "wildmidi"                                                                  
    enabled "no"                                                                       
}                                                                                  
                                                                                   
replaygain "off"                                                                   
replaygain_preamp "0"                                                              
#replaygain_missing_preamp "0"                                                     
#replaygain_limit "yes"                                                            
volume_normalization "no"                                                          
filesystem_charset "UTF-8"                                                         


# Audio Output ################################################################
#
# MPD supports various audio output types, as well as playing through multiple
# audio outputs at the same time, through multiple audio_output settings
# blocks. Setting this block is optional, though the server will only attempt
# autodetection for one sound card.
#
# # An example of a PipeWire output:
# #
# audio_output {
#     type "pipewire"
#     name "PipeWire Playback"
# }
#
# An example of a httpd output (built-in HTTP streaming server):
#
# audio_buffer_size "192000"
# max_output_buffer_size "131072"
# alsa_output: buffer_size=96000 period_size=24000

# Lossless (без сжатия) через format + без encoder
# Если ты не укажешь encoder, MPD будет отдавать сырой PCM-поток (WAV).
audio_output {
    type            "httpd"
    name            "WAVE PCM Stream 48000:24:2 port:8000"
    encoder         "wave" 
    port            "8000"
    bind_to_address "0.0.0.0"
    format          "48000:24:2"
    max_clients     "5"
    always_on       "yes"        # don't drop listeners when audio stops
    tags            "yes"        # send artist/title metadata}
}
## mpv http://192.168.122.206:8000
audio_output {
    type            "httpd"
    name            "FLAC Stream 48000:24:2 port:8000"
    encoder         "flac"
    port            "8000"
    bind_to_address "0.0.0.0"
    format          "48000:24:2"
    max_clients     "5"
    always_on       "yes"        # don't drop listeners when audio stops
    tags            "yes"        # send artist/title metadata}
}

audio_output {
	type            "httpd"
	name		    "VORBIS Stream 44100:16:2 port:8000"
	encoder		    "vorbis"	 # optional, vorbis or lame
	port		    "8000"
	bind_to_address	"0.0.0.0"	 # optional, IPv4 or IPv6
	quality		    "10.0"		 # do not define if bitrate is defined
	# bitrate		"320"		 # do not define if quality is defined
	format		    "44100:16:2"
	max_clients	    "0"			 # optional 0=no limit
    always_on       "yes"        # don't drop listeners when audio stops
    tags            "yes"        # send artist/title metadata}
}

# https://wiki.hydrogenaudio.org/index.php?title=Opus#Implementations
audio_output {
	type            "httpd"
	name		    "OPUS Stream 44100:16:2 port:8000"
	encoder		    "opus"		 # optional, vorbis or lame
	port		    "8000"
	bind_to_address	"0.0.0.0"	 # optional, IPv4 or IPv6
	bitrate		    "510000"	 # do not define if quality is defined
	format		    "44100:16:2"
	max_clients	    "0"			 # optional 0=no limit
    always_on       "yes"        # don't drop listeners when audio stops
    tags            "yes"        # send artist/title metadata}
}

## HARDWARE                 
audio_output {              
   type "alsa"                 
   name "USB AUDIO DEVICE"       
   device "hw:0,0"             
   #mixer_type "hardware"       
   mixer_type "none"       
   # mixer_control "PCM"         
   # mixer_index "0"             
   # dop "no"                    
}                           
                            
## SOFTWARE                 
audio_output {              
   type          "alsa"                 
   name          "ALSA SOFTWARE" 
   device        "hw:0,0"	    # optional
   # mixer_type    "software"                                         
   # format        "44100:16:2"	# optional  
   # mixer_device	 "default"              
   # mixer_control "PCM"       
   # dop "no"                    
}                           

# Character Encoding ##########################################################
#
# If file or directory names do not display correctly for your locale then you
# may need to modify this setting.
#
filesystem_charset		"UTF-8"
#
###############################################################################
